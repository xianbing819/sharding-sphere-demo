# ???? WEB ????
server:
  port: 8080

  # ????
spring:
  application:
    name: sharding-jdbc-test
  sharding-sphere:
    # ????sql
    props:
      sql:
        show: true
    datasource:
      # ????
      names: db1,db2
      # ?1 ???
      db1:
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://localhost:3306/db1
        username: root
        password: root
      # ?2 ???
      db2:
        type: com.alibaba.druid.pool.DruidDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://localhost:3306/db2
        username: root
        password: root
    sharding:
      # ????
      default-data-source-name: db1
      # ???? ??????????
      binding-tables: t_user
      # ????????
      tables:
        # ??????????
        t_user:
          # ???????sharding??????????
          actual-data-nodes: db$->{1..2}.t_user_$->{1..2}
          #????
          database-strategy:
            # ??????
            inline:
              # ????????????????????
              sharding-column: sex
              # ????????????????????????????
              algorithm-expression: db$->{sex % 2 + 1}
          # ??????????????????????sql?????id?null?????????????????????
          key-generator:
            # ??????????
            column: id
            # ????? ????
            type: SNOWFLAKE
          # ???????
          table-strategy:
            # ????
            inline:
              # ????????
              sharding-column: age
              # ???????
              algorithm-expression: t_user_$->{age % 2 +1}


mybatis.configuration.map-underscore-to-camel-case: true